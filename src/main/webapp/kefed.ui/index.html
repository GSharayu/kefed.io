
<!DOCTYPE html>
<html>
	<head>
		<title>StudyDesign</title>
		
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
		<meta name="generator" content="Polymer Starter Kit"></meta>
		<meta name="viewport"
			content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"></meta>
		<link rel="stylesheet" type="text/css" href="styles/grapheditor.css"></link>
		<link rel="icon" href="/images/favicon.ico"></link>
		
		<!-- See https://goo.gl/OOhYW5 -->
		<link rel="manifest" href="/manifest.json"></link>
		
		<!-- See https://goo.gl/qRE0vM -->
		<meta name="theme-color" content="#3f51b5"></meta>
		
		<!-- Add to homescreen for Chrome on Android. Fallback for manifest.json -->
		<meta name="mobile-web-app-capable" content="yes"></meta>
		<meta name="application-name" content="My App"></meta>
		<!-- Add to homescreen for Safari on iOS -->
		<meta name="apple-mobile-web-app-capable" content="yes"></meta>
		<meta name="apple-mobile-web-app-status-bar-style"
			content="black-translucent"></meta>
		<meta name="apple-mobile-web-app-title" content="My App"></meta>
		
		<!-- Homescreen icons -->
		<link rel="apple-touch-icon" href="/images/manifest/icon-48x48.png"></link>
		<link rel="apple-touch-icon" sizes="72x72" href="/images/manifest/icon-72x72.png"></link>
		<link rel="apple-touch-icon" sizes="96x96" href="/images/manifest/icon-96x96.png"></link>
		<link rel="apple-touch-icon" sizes="144x144" href="/images/manifest/icon-144x144.png"></link>
		<link rel="apple-touch-icon" sizes="192x192" href="/images/manifest/icon-192x192.png"></link>
		
		<!-- Tile icon for Windows 8 (144x144 + tile color) -->
		<meta name="msapplication-TileImage"
			content="/images/manifest/icon-144x144.png"></meta>
		<meta name="msapplication-TileColor" content="#3f51b5"></meta>
		<meta name="msapplication-tap-highlight" content="no"></meta>
		
		<script type="text/javascript">
			
			// Default resources are included in grapheditor resources
			mxLoadResources = false;
		</script>
		<script type="text/javascript" src="js/Init.js"></script>
		<script type="text/javascript" src="jscolor/jscolor.js"></script>
		<script type="text/javascript" src="sanitizer/sanitizer.min.js"></script>
		<script type="text/javascript" src="js/mxClient.js"></script>
		<script type="text/javascript" src="js/EditorUi.js"></script>
		<script type="text/javascript" src="js/Editor.js"></script>
		<script type="text/javascript" src="js/Sidebar.js"></script>
		<script type="text/javascript" src="js/Graph.js"></script>
		<script type="text/javascript" src="js/Shapes.js"></script>
		<script type="text/javascript" src="js/Actions.js"></script>
		<script type="text/javascript" src="js/Menus.js"></script>
		<script type="text/javascript" src="js/Format.js"></script>
		<script type="text/javascript" src="js/Toolbar.js"></script>
		<script type="text/javascript" src="js/Dialogs.js"></script>
		<script type="text/javascript" src="js/utilityJS/mxUtils.js"></script>
	</head>

	<body class="geEditor">
		
		<script type="text/javascript">
			// Extends EditorUi to update I/O action states based on availability of backend
			(function()
			{
				var editorUiInit = EditorUi.prototype.init;
				
				EditorUi.prototype.init = function()
				{
					editorUiInit.apply(this, arguments);
					this.actions.get('export').setEnabled(false);
	
					{
						{
							var enabled = true;
							this.actions.get('open').setEnabled(enabled || Graph.fileSupport);
							this.actions.get('import').setEnabled(enabled || Graph.fileSupport);
							this.actions.get('save').setEnabled(enabled);
							this.actions.get('saveAs').setEnabled(enabled);
							this.actions.get('export').setEnabled(enabled);
						};
					}
				};
				
				// Adds required resources (disables loading of fallback properties, this can only
				// be used if we know that all keys are defined in the language specific file)
				mxResources.loadDefaultBundle = false;
				var bundle = mxResources.getDefaultBundle(RESOURCE_BASE, mxLanguage) ||
					mxResources.getSpecialBundle(RESOURCE_BASE, mxLanguage);
	
				// Fixes possible asynchronous requests
				mxUtils.getAll([bundle, STYLE_PATH + '/default.xml'], function(xhr)
				{
					// Adds bundle text to resources
					mxResources.parse(xhr[0].getText());
					
					// Configures the default graph theme
					var themes = new Object();
					themes[Graph.prototype.defaultThemeName] = xhr[1].getDocumentElement(); 
					
					// Main
					new EditorUi(new Editor(urlParams['chrome'] == '0', themes));
				}, function()
				{
					document.body.innerHTML = '<center style="margin-top:10%;">Error loading resource files. Please check browser console.</center>';
				});
			})();
		</script>
		
	</body>
</html>
